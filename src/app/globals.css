@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------------------------------------
   PDBG Scrollbar (zinc palette, fade in/out)
   --------------------------------------------- */

/* Container-scoped scrollbar (use on overflow containers) */
.pdbg-scrollbar {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: rgba(161, 161, 170, 0.0) transparent; /* default hidden */
}

/* WebKit (Chrome/Edge/Safari) */
.pdbg-scrollbar::-webkit-scrollbar {
  width: 10px;
}

.pdbg-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.pdbg-scrollbar::-webkit-scrollbar-thumb {
  border-radius: 9999px;
  border: 2px solid transparent; /* creates the “padded” thumb */
  background-clip: content-box;

  /* hidden by default (fade-out state) */
  background-color: rgba(161, 161, 170, 0.0);

  /* fade animation */
  transition: background-color 180ms ease;
}

/* Fade in on hover / focus / active scrolling */
.pdbg-scrollbar:hover::-webkit-scrollbar-thumb,
.pdbg-scrollbar:focus-within::-webkit-scrollbar-thumb,
.pdbg-scrollbar:active::-webkit-scrollbar-thumb {
  background-color: rgba(161, 161, 170, 0.35); /* zinc-400-ish */
}

.pdbg-scrollbar:hover::-webkit-scrollbar-thumb:hover {
  background-color: rgba(161, 161, 170, 0.55);
}

/* Firefox “fade” approximation */
.pdbg-scrollbar:hover,
.pdbg-scrollbar:focus-within,
.pdbg-scrollbar:active {
  scrollbar-color: rgba(161, 161, 170, 0.45) transparent;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .pdbg-scrollbar::-webkit-scrollbar-thumb {
    transition: none;
  }
}

/* ---------------------------------------------
   Page scrollbar styling (for /articles, etc.)
   Applies to the browser scrollbar (html/body)
   --------------------------------------------- */

html.pdbg-page-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(161, 161, 170, 0.35) transparent;
}

html.pdbg-page-scrollbar::-webkit-scrollbar {
  width: 10px;
}

html.pdbg-page-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

html.pdbg-page-scrollbar::-webkit-scrollbar-thumb {
  border-radius: 9999px;
  border: 2px solid transparent;
  background-clip: content-box;
  background-color: rgba(161, 161, 170, 0.25);
  transition: background-color 180ms ease;
}

html.pdbg-page-scrollbar:hover::-webkit-scrollbar-thumb {
  background-color: rgba(161, 161, 170, 0.40);
}

html.pdbg-page-scrollbar:hover::-webkit-scrollbar-thumb:hover {
  background-color: rgba(161, 161, 170, 0.60);
}

@media (prefers-reduced-motion: reduce) {
  html.pdbg-page-scrollbar::-webkit-scrollbar-thumb {
    transition: none;
  }
}

/* ---------------------------------------------
   PDBG Overlay Scrollbar (clamped thumb size)
   - Keeps overflow-y-auto behavior
   - Hides native scrollbar
   - Draws an overlay thumb with a minimum height
   --------------------------------------------- */

/* Hide native scrollbar but keep scrolling */
.pdbg-scrollbar--overlay {
  scrollbar-width: none; /* Firefox */
}
.pdbg-scrollbar--overlay::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/* Overlay track container */
.pdbg-sb-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none; /* let scroll/wheel pass through by default */
  z-index: 20;
}

/* Track sits on the right edge */
.pdbg-sb-track {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;

  width: 12px;
  padding: 2px;

  pointer-events: none;
}

/* Thumb (the clickable part) */
.pdbg-sb-thumb {
  position: absolute;
  left: 2px;
  right: 2px;

  border-radius: 9999px;
  border: 2px solid transparent;
  background-clip: content-box;

  /* default: hidden */
  background-color: rgba(161, 161, 170, 0.0);
  opacity: 0;
  transform: scaleX(0.92);

  transition: opacity 180ms ease, transform 180ms ease, background-color 180ms ease;
  pointer-events: auto; /* clickable */
  cursor: grab;
}

/* Visible states:
   - hover the scroll container
   - or during active scrolling/dragging (data-sb-active="1") */
.pdbg-scrollbar--overlay:hover .pdbg-sb-thumb,
.pdbg-scrollbar--overlay[data-sb-active='1'] .pdbg-sb-thumb {
  opacity: 1;
  transform: scaleX(1);
  background-color: rgba(161, 161, 170, 0.35);
}

.pdbg-scrollbar--overlay:hover .pdbg-sb-thumb:hover,
.pdbg-scrollbar--overlay[data-sb-active='1'] .pdbg-sb-thumb:hover {
  background-color: rgba(161, 161, 170, 0.55);
}

.pdbg-sb-thumb:active {
  cursor: grabbing;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .pdbg-sb-thumb {
    transition: none;
  }
}
